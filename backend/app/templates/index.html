{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block title %}AI Appointment Scheduler - Your Intelligent Scheduling Assistant{% endblock %}

{% block content %}
<div class="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50">
  <!-- Navigation -->
  <nav class="bg-white/90 backdrop-blur-sm shadow-sm border-b border-gray-200/50 sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <div class="flex items-center space-x-3">
            <div class="w-10 h-10 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
              </svg>
            </div>
            <h1 class="text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">AI Scheduler</h1>
          </div>
        </div>
        <div class="hidden md:flex items-center space-x-8">
          <a href="#features" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Features</a>
          <a href="#how-it-works" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">How it works</a>
          <a href="#connect" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Get Started</a>
        </div>
        <div class="md:hidden">
          <button class="text-gray-600 hover:text-indigo-600">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="relative py-12 lg:py-16">
    <div class="max-w-6xl mx-auto px-4">
      <div class="grid lg:grid-cols-2 gap-20 lg:gap-24 items-stretch min-h-[900px] justify-center">
        <!-- Left Side - Content -->
        <div class="space-y-6">
          <div class="space-y-4">
            <h2 class="text-3xl lg:text-4xl font-bold text-gray-900 leading-tight">
              <div class="whitespace-nowrap">AI Assistant That Books,</div>
              <div class="whitespace-nowrap">Reschedules, and Organizes</div>
            </h2>
            <h1 class="text-4xl lg:text-6xl font-bold text-gray-900 leading-tight">
              <div><span class="bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">All Through Chat.</span></div>
            </h1>
            <p class="text-sm lg:text-base text-gray-600 leading-relaxed">
              Connect your calendar and chat with your AI assistant. It will book, move, or cancel meetings for you, check when you're free, and keep your schedule neat—no forms or hassle. Just type your request, and your AI takes care of everything.
            </p>
          </div>
          
          <!-- CTA Buttons -->
          <div class="flex flex-col sm:flex-row gap-4">
            <a href="/api/v1/auth/google" class="inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-medium text-sm rounded-lg shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-300">
              <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24">
                <path fill="currentColor" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="currentColor" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="currentColor" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="currentColor" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
              </svg>
              Connect with Google
            </a>
            <button onclick="showEmailForm()" class="inline-flex items-center justify-center px-6 py-3 bg-white text-gray-700 font-medium text-sm rounded-lg shadow-md hover:shadow-lg border border-gray-200 transform hover:scale-105 transition-all duration-300">
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
              </svg>
              Connect with Email
            </button>
          </div>
        </div>

        <!-- Right Side - AI Demo -->
        <div class="relative flex justify-center lg:justify-end lg:mr-0">
          <div class="relative w-full max-w-md md:w-80 h-[600px] overflow-y-auto flex flex-col overflow-hidden group rounded-2xl shadow-xl mx-auto">
            <!-- Gradient Border -->
            <div class="absolute inset-0 rounded-2xl p-[2px] bg-gradient-to-br from-indigo-400 via-purple-400 to-pink-400 blur-sm opacity-60 pointer-events-none"></div>
            <div class="relative bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl border border-gray-200/50 h-full flex flex-col overflow-hidden">
              <!-- Header -->
              <div class="flex items-center gap-3 px-4 py-3 border-b border-gray-100 mb-4">
                <div class="w-8 h-8 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full flex items-center justify-center">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                  </svg>
                </div>
                <div>
                  <h2 class="text-base font-bold text-indigo-700 leading-tight">AI Demo</h2>
                  <p class="text-xs text-indigo-400">See how easy it is</p>
                </div>
              </div>
              <!-- Chat Area -->
              <div class="flex-1 flex flex-col gap-2 px-3 py-4 overflow-y-auto bg-gradient-to-b from-white/80 to-indigo-50/40">
                {{ macros.chat_bubble('left', {'icon': 'bg-gradient-to-r from-indigo-600 to-purple-600', 'bubble': 'bg-white rounded-xl px-3 py-2 shadow border border-gray-100 max-w-[75%]'}, '<svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>', '<p class="text-gray-800 text-xs">Hi! I\'m your AI scheduler. What can I help you with today?</p>') }}
                {{ macros.chat_bubble('left', {'icon': 'bg-gradient-to-r from-indigo-600 to-purple-600', 'bubble': 'bg-white rounded-xl px-3 py-2 shadow border border-gray-100 flex items-center gap-1 max-w-[60%]'}, '<svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none" /></svg>', '<span class="block w-1.5 h-1.5 bg-indigo-400 rounded-full animate-bounce"></span><span class="block w-1.5 h-1.5 bg-indigo-300 rounded-full animate-bounce delay-150"></span><span class="block w-1.5 h-1.5 bg-indigo-200 rounded-full animate-bounce delay-300"></span><span class="ml-1 text-[10px] text-gray-400">typing...</span>', '') }}
                {{ macros.chat_bubble('right', {'icon': 'bg-gray-400', 'bubble': 'bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl px-3 py-2 shadow text-white font-semibold max-w-[75%]'}, '<svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>', '<p class="text-white text-xs">I need to schedule a meeting with John tomorrow at 2pm</p>') }}
                {{ macros.chat_bubble('left', {'icon': 'bg-gradient-to-r from-green-500 to-emerald-500', 'bubble': 'bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl px-3 py-2 shadow border-l-4 border-green-400 font-medium max-w-[75%]'}, '<svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>', '<p class="text-gray-800 text-xs"><span class="text-green-600 font-semibold">✅ Meeting scheduled!</span> Your meeting with John is set for tomorrow at 2pm. Calendar invite sent to john@email.com</p>') }}
                <div class="flex-1"></div>
                <div class="text-center mt-4 mb-2 relative z-10">
                  <a href="/api/v1/auth/google" class="inline-flex items-center space-x-2 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg px-8 py-4 text-lg text-white font-bold shadow-lg hover:from-indigo-600 hover:to-purple-600 hover:scale-105 transition-all duration-300">
                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    <span>Ready to try it yourself?</span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section id="features" class="py-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">Why Choose AI Scheduler?</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">Experience the future of appointment scheduling with intelligent automation and natural conversations</p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {{ macros.feature_card('<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg>', 'from-indigo-500 to-purple-500', 'Natural Conversations', 'Chat naturally with your AI scheduler. No forms, no complexity - just tell it what you need.') }}
        {{ macros.feature_card('<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>', 'from-green-500 to-emerald-500', 'Smart Availability', 'AI learns your preferences and suggests optimal times, automatically handling conflicts.') }}
        {{ macros.feature_card('<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path></svg>', 'from-blue-500 to-cyan-500', 'Calendar Sync', 'Seamlessly integrates with Google Calendar, Outlook, and other popular platforms.') }}
        {{ macros.feature_card('<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5zM4 19h6v-2H4v2zM4 15h6v-2H4v2zM4 11h6V9H4v2zM4 7h6V5H4v2zM10 7h10V5H10v2zM10 11h10V9H10v2zM10 15h10v-2H10v2zM10 19h10v-2H10v2z"></path></svg>', 'from-purple-500 to-pink-500', 'Auto Reminders', 'Automatic email confirmations and reminders keep everyone informed and on time.') }}
        {{ macros.feature_card('<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>', 'from-orange-500 to-red-500', '24/7 Availability', 'Your AI scheduler works around the clock, handling requests even when you\'re unavailable.') }}
        {{ macros.feature_card('<svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>', 'from-teal-500 to-green-500', 'Analytics & Insights', 'Get insights into your scheduling patterns and optimize your time management.') }}
      </div>
    </div>
  </section>

  <!-- How it Works Section -->
  <section id="how-it-works" class="py-20 bg-white/50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-4xl font-bold text-gray-900 mb-4">How AI Scheduler Works</h2>
        <p class="text-xl text-gray-600 max-w-3xl mx-auto">Get started in minutes with our simple 4-step process</p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
        {{ macros.step_card('1', 'Connect', 'Connect your calendar with Google or email authentication') }}
        {{ macros.step_card('2', 'Chat', 'Start a conversation with your AI scheduler') }}
        {{ macros.step_card('3', 'Schedule', 'AI handles the scheduling and sends confirmations') }}
        {{ macros.step_card('4', 'Done', 'Your calendar is updated and everyone is notified') }}
      </div>
    </div>
  </section>
</div>

<!-- Email Form Modal (Hidden by default) -->
<div id="email-form-container" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
  <div class="bg-white rounded-2xl p-8 border border-gray-200 shadow-xl max-w-md mx-4">
    <div class="text-center mb-6">
      <h3 class="text-2xl font-bold text-gray-900 mb-2">Connect with Email</h3>
      <p class="text-gray-600">Enter your email to get started</p>
    </div>
    
    <form id="email-form" hx-post="/connect-email" hx-target="#email-response" hx-swap="innerHTML" class="space-y-4">
      <div>
        <input 
          type="email" 
          name="email" 
          required 
          class="w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors text-base"
          placeholder="Enter your email address"
        />
      </div>
      
      <button 
        type="submit" 
        class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-3 px-4 rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
      >
        Start Scheduling
      </button>
    </form>
    
    <div id="email-response" class="mt-4 text-center"></div>
    
    <button onclick="hideEmailForm()" class="w-full mt-4 text-gray-600 hover:text-gray-800 font-medium">
      ← Back to options
    </button>
  </div>
</div>

<script>
function showEmailForm() {
  document.getElementById('email-form-container').classList.remove('hidden');
}

function hideEmailForm() {
  document.getElementById('email-form-container').classList.add('hidden');
}

// Handle successful connection redirects
document.addEventListener('htmx:afterRequest', function(event) {
  if (event.detail.xhr.status === 200) {
    const response = event.detail.xhr.responseText;
    if (response.includes('redirect') || response.includes('dashboard')) {
      window.location.href = '/dashboard';
    }
  }
});

// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});
</script>
{% endblock %}

<style>
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-up {
  animation: fade-in-up 0.6s ease-out forwards;
  opacity: 0;
}
</style>